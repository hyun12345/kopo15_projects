<!--k15전아현 / 2018.06.04.-->

<?xml version="1.0" encoding="utf-8"?>
<meta charset "utf-8">
<!--한글 출력 위한 utf-8인코딩-->

<HTML>

<HEAD>
    <SCRIPT>
        function addZero(n, digits) {
            //두 변수를 대입하는 addZero() 함수 생성
            var zero = "";
            //변수 zero의 초기값을 ""으로 설정(문자열 변수)
            n = n.toString();
            //n의 값을 정수 n을 문자열로 강제 형변환한 값으로 설정하기 위해 n.toString()으로 설정
            if (n.length < digits) {
                for (var i = 0; i < digits - n.length; i++)
                    zero += "0";
                //for문으로 정수 변수 i의 초기값을 0으로 설정하고 number - n.length보다 작은 동안 그 값이 1씩 더해지도록 설정하여 
                //for문이 반복되는 동안  zero의 값을 zero + "0"으로 설정
                //즉 십의자리 등이 되지 않는 수에는 zero의 값이 0이 누적되도록 설정(number자리수에 맞추어 0누적)
            }
            return zero + n;
            //if조건으로 n.length의 크기가 number보다 작으면 zero + n을 반환하도록 설정

        }
    </SCRIPT>
    <SCRIPT>
        var k15_itemname = ["블루베리머핀", "무설탕딸기요플레", "레드벨벳케이크", "불닭볶음면", "에어리즘티셔츠", "유기농딸기", "유기농참외", "생수2L*6",
            "유기농계란", "청바지", "샌들", "순면화장솜", "애견사료", "강아지장난감", "복사용지500매", "닭강정", "피자", "전자렌지", "연어초밥", "자몽",
            "유기농사과",
            "순면오리털이불", "공기청정기", "시리얼", "강아지옷", "한돈목살", "한돈삼겹살", "냉장고", "백숙용닭고기", "버라이어티쿠키", "샴푸린스세트1+1"
        ];
        //상품명 배열 생성하여 값 입력

        var k15_price = [1111, 1111, 1100, 1500, 200, 1500, 1000, 2000, 8000, 30000, 3000, 3000, 1100, 1000, 1300,
            1100, 11000, 120000, 1100, 5000, 1000, 500, 1000, 3000, 2000, 8000, 8000, 1600, 7100, 990, 1380
        ];
        //단가 배열 생성하여 값 입력

        var k15_num = [
            2, 5, 6, 12, 11, 1, 17, 1,
            6, 8, 19, 10, 5, 9, 10, 1,
            5, 9, 8, 4, 5, 7, 4, 42, 21,
            5, 5, 7, 9, 9, 10
        ];
        //수량 배열 생성하여 값 입력

        var k15_taxfree = [false, false, false, false, false, true, true, false, true, false, false, false,
            false, false, false, false, false, false, false, false, true, false, false, false, false, false,
            false,
            false, false, false, false
        ];
        //면세 여부 배열 생성하여 면세 상품에는 true 값을, 과세 상품에는 false 값을 입력

        var k15_cash = 0;
        var k15_Total;
        var k15_card;
        var k15_NotTaxfreeTotal = 0;
        var k15_TaxfreeTotal = 0;
        var k15_TotalNetVal;
        var k15_TotalTax;
        // 금액 계산에 필요한 각각의 정수 변수 선언(카드계산이므로 현금 변수 k15_cash의 값을 0으로 설정)

        var date = new Date();
        //Date 객체 생성
        var k15_date = date.getFullYear() + "-" +
            addZero((date.getMonth() + 1), 2) + "-" + addZero(date.getDate(), 2) + " " + addZero(date.getHours(), 2) +
            ":" + addZero(date.getMinutes(), 2);
        //k15_date 변수 생성하여 출력 형식에 맞게 날짜가 출력될 수 있도록 설정(연-월-일 시:분)
        //addZero를 월, 일, 시, 분, 초 등에 활용하여 십의 자리가 되지 않는 경우 앞에 0을 덧붙일 수 있음
    </SCRIPT>

    <SCRIPT>
        function k15_numberWithCommas(number) {
            //대입한 number 값의 천의 자리마다 , 출력하는 k15_numberWithCommas()함수 생성
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            //number의 값을 문자열로 형변환하여(toString()) replace()함수 활용
            //replace(a, b) : a의 값을 b로 대체
            //정규식 : \B : 문자형이 아닌 경우 사용 / x(?=y) : 'y'가 뒤따라오는'x'에만 일치 / \d : 숫자 문자와 일치 / {n} : 앞 문자가 n 번 나타날 경우에 일치
            //+ : 1회 이상 연속으로 반복되는 앞선 문자에 일치 / x(?!y) : 오직 'y'가 뒤따라오지 않는 'x'에만 일치
            // /g : 한정자(global match)로 전역 매칭, 첫 번째로 일치하는 문자열이 검색되더라도 패턴 매칭을 중지하지 않고 전체 텍스트에 대해 모든 일치하는 문자열을 찾음




        }
    </SCRIPT>

    <SCRIPT>
        document.write("<TABLE border=0 valign=middle><TR>");
        //테이블 생성하여 표형식(border)을 0으로 지정하고 상하정렬방식(valign)을 middle로 지정한 후 열<TR> 생성
        document.write("<TD rowspan=3>" +
            //rowspan=n : n열 병합
            "<STRONG><FONT SIZE = 6>emart</FONT></STRONG>" +
            "</TD>");
        //<STRONG> : 글씨 진하게 출력 / <FONT SIZE =    N> : 1-7까지 범위 내에서 글씨 크기 조정(7이 가장 큼)
        document.write("<TD colspan=3>" + "이마트 죽전점 (031)888-1234<br>" + "</TD>");
        document.write("</TR>");
        //colspan=n : n행 병합

        document.write("<TR>");
        document.write("<TD colspan=3>" + "206-86-50813 이갑수<br>" + "</TD>");
        document.write("</TR>");

        document.write("<TR>");
        document.write("<TD colspan=3>" + "용인시 수지구 포은대로 552<br><br>" + "</TD>");
        document.write("</TR>");

        document.write("<TR>");
        document.write("<TD colspan=4>" + "영수증 미지참시 교환/환불 불가(30일내)<br>" +
            "</TD>");
        document.write("</TR>");

        document.write("<TR>");
        document.write("<TD colspan=4>" + "교환/환불 구매점에서 가능(결제카드지참)<br>" + "</TD>");
        document.write("</TR>");

        document.write("<TR>");
        document.write("<TD colspan=4>" + "체크카드/신용카드 청구취소 반영은<br>" + "</TD>");
        document.write("</TR>");

        document.write("<TR>");
        document.write("<TD colspan=4>" + "최대 3~5일 소요 (주말,공휴일제외)<br><br>" + "</TD>");
        document.write("</TR>");

        document.write("<TR>");
        document.write("<TD colspan=2>" + "[구 매]" + k15_date + "</TD>");
        document.write("<TD colspan=2 align=right>" + "POS:0009-2418");
        //좌우정렬방식(align) right 지정 
        document.write("</TR>");
        //8열 생성하여 영수증 상단부분 출력 내용 각 행 내용으로 설정
    </SCRIPT>
</HEAD>

<BODY>
    <SCRIPT>
        document.write("<TR>");
        document.write("<TD colspan=4>" + "---------------------------------------------------------------<br>");
        document.write("</TD></TR>");
        document.write("<TR align=right>");
        document.write("<TD align=center>" + "상 품 명" + "</TD>");
        document.write("<TD>" + "단 가" + "</TD>");
        document.write("<TD>" + "수량" + "</TD>");
        document.write("<TD>" + "금 액" + "</TD></TR>");
        document.write("<TR>");
        document.write("<TD colspan=4>" + "---------------------------------------------------------------<br>");
        document.write("</TD></TR>");
        //영수증 출력 목록 부분 각 행 내용으로 설정
    </SCRIPT>
    <SCRIPT>
        for (var k15_i = 1; k15_i < k15_itemname.length; k15_i++) {
            //for문으로 k15_i의 초기값이 1이고 k15_itemname배열의 길이보다 작은 동안 그 값이 1씩 더해지도록 설정
            if (k15_taxfree[k15_i] == false) {
                var tax_k15_i = addZero(k15_i, 2) + "&nbsp;";
                //k15_taxfree 배열의 k15_i번째 값이 false와 일치할 때 tax_k15_i의 값을 addZero(k15_i, 2)로 설정하고 공백을 더해줌
                //십의 자리가 되지 않는 경우 앞자리에 0을 출력하기 위해 addZero()함수에 각 값을 대입
                //&nbsp; : 공백을 연이어 출력하고 싶을 때 사용
            } else if (k15_taxfree[k15_i] == true) {
                tax_k15_i = addZero(k15_i, 2) + "*";
                //k15_taxfree 배열의 k15_i번째 값이 true 일치할 때 tax_k15_i의 값을 addZero(k15_i, 2)로 설정하고 *을 더해줌
                //십의 자리가 되지 않는 경우 앞자리에 0을 출력하기 위해 addZero()함수에 각 값을 대입
            }

            var k15_itemTotal = (k15_price[k15_i] * k15_num[k15_i]);
            // 변수 k15_itemTotal의 값을 k15_price배열과 k15_num배열의 각 값을 곱한 값으로 설정

            if (k15_taxfree[k15_i] == false) {
                k15_NotTaxfreeTotal = k15_NotTaxfreeTotal + k15_itemTotal;
                //k15_taxfree 배열의 k15_i번째 값이 false와 일치할 때 k15_NotTaxfreeTotal 값을 k15_NotTaxfreeTotal+k15_itemTotal로 설정
            } else if (k15_taxfree[k15_i] == true) {
                k15_TaxfreeTotal = k15_TaxfreeTotal + k15_itemTotal;
                //k15_taxfree 배열의 k15_i번째 값이 true 일치할 때 k15_TaxfreeTotal 값을 k15_TaxfreeTotal+k15_itemTotal로 설정
            }

            document.write("<TR align=right>");
            document.write("<TD align=left>" + tax_k15_i + " " + k15_itemname[k15_i].substring(0, 6) + "</TD>");
            //.substring(0,6) : 해당 변수의 값에서 0번째 문자부터 6개의 문자만 출력되도록 설정
            document.write("<TD>" + k15_numberWithCommas(k15_price[k15_i]) + "</TD>");
            document.write("<TD>" + k15_num[k15_i] + "</TD>");
            document.write("<TD>" + k15_numberWithCommas(k15_itemTotal) + "</TD>");
            document.write("</TR>");
            //k15_numberWithCommas함수에 값 대입하여 천의 자리마다 , 출력되도록 설정
        }
        document.write("<TR>");
        document.write("<TD colspan=4>" + "---------------------------------------------------------------<br>");
        document.write("</TD></TR>");
        //구분선 출력

        k15_Total = k15_NotTaxfreeTotal + k15_TaxfreeTotal;
        k15_TotalNetVal = parseInt(k15_NotTaxfreeTotal / 1.10);
        k15_TotalTax = k15_NotTaxfreeTotal - k15_TotalNetVal;
        k15_card = k15_Total;
        //출력을 위해 대입해야 하는 각 변수의 값 설정
        //k15_TotalNetVal의 값의 경우 1.10(실수)로 나누기 때문에 정수형으로 형변환 해주어야 함(parseInt()활용)
    </SCRIPT>

    <SCRIPT>
        document.write("<TR align=right>");
        document.write("<TD colspan=2>" + "(*)면세" + "&nbsp;&nbsp;&nbsp;" + "물품" +
            "</TD>");
        document.write("<TD colspan=2>" + k15_numberWithCommas(k15_TaxfreeTotal) + "</TD>");
        document.write("</TR>");
        document.write("<TR align=right>");
        document.write("<TD colspan=2>" + "과세" + "&nbsp;&nbsp;&nbsp;" + "물품" +
            "</TD>");
        document.write("<TD colspan=2>" + k15_numberWithCommas(k15_TotalNetVal) + "</TD>");
        document.write("</TR>");
        document.write("<TR align=right>");
        document.write("<TD colspan=2>" + "부" + "&nbsp;&nbsp;&nbsp;" + "가" + "&nbsp;&nbsp;&nbsp;" + "세" +
            "</TD>");
        document.write("<TD colspan=2>" + k15_numberWithCommas(k15_TotalTax) + "</TD>");
        document.write("</TR>");
        document.write("<TR align=right>");
        document.write("<TD colspan=2>" + "합" + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + "계" +
            "</TD>");
        document.write("<TD colspan=2>" + k15_numberWithCommas(k15_Total) + "</TD>");
        document.write("</TR>");
        document.write("<TR align=right>");
        document.write("<TD colspan=2 align=left>" + "결" + "&nbsp;&nbsp;" + "제" + "&nbsp;&nbsp;" + "대" + "&nbsp;&nbsp;" +
            "상" + "&nbsp;&nbsp;" + "금" + "&nbsp;&nbsp;" + "액" +
            "</TD>");
        document.write("<TD colspan=2>" + k15_numberWithCommas(k15_Total) + "</TD>");
        document.write("</TR>");
        document.write("<TR align=right>");
        document.write("<TD colspan=4>" +
            "---------------------------------------------------------------<br></TD></TR>");
        document.write("<TR align=right>");
        document.write("<TD align=left colspan=2>" + "0024 하 나" + "</TD>");
        document.write("<TD colspan=2>" + "5417**8890/07850246<br>" + "</TD></TR>");
        document.write("<TR align=right>");
        document.write("<TD align=left colspan=2>" + "카드결제" + "</TD>");
        document.write("<TD colspan=2>" + "일시불" + " / " + k15_numberWithCommas(k15_card) + "</TD></TR>");
        document.write("<TD colspan=4>" + "---------------------------------------------------------------<br>");
        document.write("</TD></TR>");
        document.write("<TR>");
        document.write("<TD colspan=4>" + "전*현 고객님의 포인트 현황입니다.<br>");
        document.write("</TD></TR></TABLE>");
        //공백 출력 원하는만큼 &nbsp;입력
        //k15_numberWithCommas()함수 활용하여 천의 자리수마다 , 출력되도록 설정
        //table 행의 수를 고려하여 colspan=n 활용하여 필요할 때마다 병합
    </SCRIPT>
</BODY>

</HTML>